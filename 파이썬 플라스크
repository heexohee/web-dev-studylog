ğŸ”¨ ê³µë¶€í•œ ê²ƒ/ì‹œë„í•œ ê²ƒ
íŒŒì´ì¬ì˜ í”„ë ˆì„ì›Œí¬ì¸ flaskë¥¼ ì“°ê¸° ìœ„í•´ì„œëŠ” ë¬¸ë²•ì„ ë”°ë¼ì•¼í•¨. (render_template)
ì•„ë˜ app.pyíŒŒì¼ì—ì„œ ì„œë²„ë¥¼ ë§Œë“œëŠ” ë°±ì—”ë“œ ì½”ë“œë¥¼ êµ¬í˜„í•¨.
Jsonify -> ì œì´ì¿¼ë¦¬ë¡œ
ğŸ” app.py (ë°±ì—”ë“œ êµ¬í˜„ ì½”ë“œ ë¶„ì„)

GET ìš”ì²­
í†µìƒì ìœ¼ë¡œ ë°ì´í„° ì¡°íšŒ(Read)ë¥¼ ìš”ì²­ ì‹œ ì‚¬ìš©.
ì˜ˆ) ì˜í™” ëª©ë¡ ì¡°íšŒ
â†’ ë°ì´í„° ì „ë‹¬ : URL ë’¤ì— ë¬¼ìŒí‘œë¥¼ ë¶™ì—¬ key=valueë¡œ ì „ë‹¬
POST ìš”ì²­
í†µìƒì ìœ¼ë¡œ ë°ì´í„° ìƒì„±(Create), ë³€ê²½(Update), ì‚­ì œ(Delete) ìš”ì²­ ì‹œ ì‚¬ìš©.
ì˜ˆ) íšŒì›ê°€ì…, íšŒì›íƒˆí‡´, ë¹„ë°€ë²ˆí˜¸ ìˆ˜ì •
â†’ ë°ì´í„° ì „ë‹¬ : ë°”ë¡œ ë³´ì´ì§€ ì•ŠëŠ” HTML
ë§ˆì§€ë§‰ ì¤„ì˜ port=5000ì€ http://localhost:5000/ ì— ì˜¬ë¦°ë‹¤ëŠ” ì˜ë¯¸(ì •ì‹ ë°°í¬ ì‹œ ì½”ë“œ ë‹¬ë¼ì§, ë‹¬ë¼ì§„ ì½”ë“œëŠ” ë‹¤ìŒ ê²Œì‹œë¬¼ì—ì„œ)
from flask import Flask, render_template, request, jsonify
app = Flask(__name__)

from pymongo import MongoClient
import certifi
ca = certifi.where()
client = MongoClient('mongodb+srv://sparta:test@cluster0.p77xisx.mongodb.net/?retryWrites=true&w=majority', tlsCAFile=ca)
db = client.dbsparta


@app.route('/')
def home():
    return render_template('index.html') #í”Œë¼ìŠ¤í¬ì—  render_templateê¸°ëŠ¥ì„ ì´ìš©í•˜ê² ë‹¤ê³  í•˜ëŠ” ê²ƒ.

@app.route("/bucket", methods=["POST"])
def bucket_post():
    bucket_receive = request.form['bucket_give']
    doc = {
      'bucket': bucket_receive,
    }
    db.bucket.insert_one(doc)
    return jsonify({'msg': 'ì €ì¥ ì™„ë£Œ!'})
    
@app.route("/bucket", methods=["GET"])
def bucket_get():
    all_buckets = list(db.bucket.find({},{'_id':False}))
    return jsonify({'result': all_buckets})

if __name__ == '__main__':
    app.run('0.0.0.0', port=5000, debug=True)
index.html ì½”ë“œ
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>

    <link
      href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap"
      rel="stylesheet"
    />

    <title>ì¸ìƒ ë²„í‚·ë¦¬ìŠ¤íŠ¸</title>

    <style>
      * {
        font-family: "Gowun Dodum", sans-serif;
      }
      .mypic {
        width: 100%;
        height: 200px;

        background-image: linear-gradient(
            0deg,
            rgba(0, 0, 0, 0.5),
            rgba(0, 0, 0, 0.5)
          ),
          url("https://images.unsplash.com/photo-1601024445121-e5b82f020549?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1189&q=80");
        background-position: center;
        background-size: cover;

        color: white;

        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }
      .mypic > h1 {
        font-size: 30px;
      }
      .mybox {
        width: 95%;
        max-width: 700px;
        padding: 20px;
        box-shadow: 0px 0px 10px 0px lightblue;
        margin: 20px auto;
      }
      .mybucket {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
      }

      .mybucket > input {
        width: 70%;
      }
      .mybox > li {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;

        margin-bottom: 10px;
        min-height: 48px;
      }
      .mybox > li > h2 {
        max-width: 75%;
        font-size: 20px;
        font-weight: 500;
        margin-right: auto;
        margin-bottom: 0px;
      }
      .mybox > li > h2.done {
        text-decoration: line-through;
      }
    </style>
    <script>
      $(document).ready(function () {
        show_bucket();
      });

      function show_bucket() {
        fetch('/bucket').then(res => res.json()).then(data => {
               let rows = data['result']
               $('#bucket-list').empty()
              rows.forEach((a)=>{
                let bucket = a['bucket']
                let temp_html=`<li>
                                <h2>âœ… ${bucket}</h2>
                              </li>`
                              $('#bucket-list').append(temp_html)
               })
            })
      }

      function save_bucket() {
        let bucket=$('#bucket').val(

        )
        let formData = new FormData();
        formData.append("bucket_give", bucket);

        fetch('/bucket', {method: "POST",body: formData,}).then((response) => response.json()).then((data) => {
            alert(data["msg"]);
            window.location.reload();
          });
      }

    </script>
  </head>
  <body>
    <div class="mypic">
      <h1>ë‚˜ì˜ ë²„í‚·ë¦¬ìŠ¤íŠ¸</h1>
    </div>
    <div class="mybox">
      <div class="mybucket">
        <input
          id="bucket"
          class="form-control"
          type="text"
          placeholder="ì´ë£¨ê³  ì‹¶ì€ ê²ƒì„ ì…ë ¥í•˜ì„¸ìš”"
        />
        <button onclick="save_bucket()" type="button" class="btn btn-outline-primary">ê¸°ë¡í•˜ê¸°</button>
      </div>
    </div>
    <div class="mybox" id="bucket-list">
      <li>
        <h2>âœ… í˜¸ì£¼ì—ì„œ ìŠ¤ì¹´ì´ë‹¤ì´ë¹™ í•˜ê¸°</h2>
      </li>
    </div>
  </body>
</html>
ìµœì¢… ê²°ê³¼ë¬¼

ğŸ’¡ ì•Œê²Œëœ ê²ƒ
í”Œë¼ìŠ¤í¬ì˜ ê°œë…-> íŒŒì´ì¬ì˜ í”„ë ˆì„ ì›Œí¬!
